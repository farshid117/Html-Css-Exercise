<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <!-- for show farsi text in Linux Server -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="keywords" content="کلمات کلیدی پروژه برای بالابردن سئو" />
    <meta name="description" content="توضیحی از پروژه" />
    <meta name="outher" content="مهندس علیرضا خیاطپور" />

    <link rel="icon" href="../img/favicon.ico" type="image/png" />
    <link rel="stylesheet" href="../css/bootstrap.rtl.min.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../../css/bootstrap-icons.css" />
    <link rel="stylesheet" href="../../css/style.css" />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js"
      async></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/plugins/bgset/ls.bgset.min.js"
      async></script>

    <title>Parallax Simple</title>
  </head>
  <!-- //todo: style -->
  <style></style>

  <!-- //todo: body -->
  <body>
    <div
      class="section1 lazyload lazy-bg"
      data-bg="../../img/03-my-miniproject-ui/04-parallax-simple/2.jpg">
      <div>
        <p>سکشن اول: پس‌زمینه ثابت است.</p>
      </div>
    </div>

    <!-- سکشن دوم -->
    <div
      class="section2 lazyload lazy-bg"
      data-bg="../../img/03-my-miniproject-ui/04-parallax-simple/khodam3.jpg">
      <div>
        <p>سکشن دوم: پس‌زمینه در حال حرکت است.</p>
      </div>
    </div>
    <!-- سکشن سوم -->
    <div
      class="section3 lazyload lazy-bg"
      data-bg="../../img/03-my-miniproject-ui/04-parallax-simple/khodam5.jpg">
      <div>
        <p>سکشن سوم: پس‌زمینه در حال حرکت است.</p>
      </div>
    </div>
    <!-- سکشن چهارم -->
    <div
      class="section4 lazyload lazy-bg"
      data-bg="../../img/03-my-miniproject-ui/04-parallax-simple/3.jpg">
      <div>
        <p>سکشن چهارم: پس‌زمینه در حال حرکت است.</p>
      </div>
    </div>
  </body>
  <!-- //todo: jsvascript -->
  <script>
    const section2Elm = document.querySelector(".section2");
    const section3Elm = document.querySelector(".section3");

    window.addEventListener("scroll", (event) => {
      if (scrollY < innerHeight) {
        section2Elm.style.backgroundAttachment = "scroll";
      }
      if (scrollY >= innerHeight) {
        section2Elm.style.backgroundAttachment = "fixed";
      }
      if (scrollY < innerHeight * 2) {
        section3Elm.style.backgroundAttachment = "scroll";
      }
      if (scrollY >= innerHeight * 2) {
        section3Elm.style.backgroundAttachment = "fixed";
      }
    });
    document.addEventListener("DOMContentLoaded", function () {
      const lazyBackgrounds = document.querySelectorAll(".lazy-bg");

      const lazyLoadBackgrounds = () => {
        lazyBackgrounds.forEach((bg) => {
          if (bg.getBoundingClientRect().top < window.innerHeight) {
            const bgUrl = bg.dataset.bg;
            if (bgUrl) {
              bg.style.backgroundImage = `url('${bgUrl}')`;
              bg.removeAttribute("data-bg");
            }
          }
        });
      };

      window.addEventListener("scroll", lazyLoadBackgrounds);
      lazyLoadBackgrounds(); // اجرا هنگام لود اولیه
    });
  </script>
</html>
