<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <!-- for show farsi text in Linux Server -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="keywords" content="کلمات کلیدی پروژه برای بالابردن سئو" />
    <meta name="description" content="توضیحی از پروژه" />
    <meta name="outher" content="مهندس علیرضا خیاطپور" />

    <link rel="icon" href="../img/favicon.ico" type="image/png" />

    <link rel="stylesheet" href="../../css/all.css" />
    <link rel="stylesheet" href="../css/bootstrap.rtl.min.css" />
    <link rel="stylesheet" href="../../css/bootstrap-icons.css" />
    <link rel="stylesheet" href="../../css/style.css" />

    <title>Scroll-Spy</title>
  </head>

  <!-- //todo: body -->

  <body class="scroll-spy-body">
    <nav id="navbar">
      <ul>
        <li>
          <a href="#section1" class="nav-link default-active active">بخش ۱</a>
        </li>
        <li><a href="#section2" class="nav-link">بخش ۲</a></li>
        <li><a href="#section3" class="nav-link">بخش ۳</a></li>
      </ul>
    </nav>

    <div id="section1" class="section-spy">بخش ۱</div>
    <div id="section2" class="section-spy">بخش ۲</div>
    <div id="section3" class="section-spy">بخش ۳</div>

    <!-- //todo: jsvascript -->
    <script>
      // گرفتن لینک‌های ناوبری
      const navLinks = document.querySelectorAll(".nav-link");
      const defaultActiveLink = document.querySelector(".default-active");

      // a: ذخیره لینک فعال فعلی
      let currentActiveLink = defaultActiveLink;

      // Scroll Spy: بهینه‌سازی هایلایت لینک‌ها هنگام اسکرول
      window.addEventListener("scroll", () => {
        navLinks.forEach((link) => {
          const section = document.querySelector(link.getAttribute("href"));
          const rect = section.getBoundingClientRect();

          // b: بررسی اینکه بخش در محدوده دید است یا نه
          if (rect.top >= 0 && rect.top < innerHeight / 2) {
            if (currentActiveLink !== link) { // c: اگر لینک فعال تغییر کند

              currentActiveLink.classList.remove("active");
              link.classList.add("active");
              currentActiveLink = link; // d: به‌روزرسانی لینک فعال
            }
          }
        })
      })

      // Smooth Scroll برای کلیک روی لینک‌ها
      navLinks.forEach((link) => {
        link.addEventListener("click", (event) => {
          event.preventDefault(); // جلوگیری از رفتار پیش‌فرض لینک

          const section = document.querySelector(link.getAttribute("href"));
          section.scrollIntoView({ behavior: "smooth", block: "start" }); // اسکرول نرم
        });
      });
    </script>
  </body>
</html>
